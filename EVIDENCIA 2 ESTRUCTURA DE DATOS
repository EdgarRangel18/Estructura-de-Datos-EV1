import pandas as pd  
from datetime import date
registro_ventas={}
venta_final= []
separador= "*********************************"
while True:
    print("\n***MENU***")
    print("1.- Registrar una venta")
    print("2.- Consultar una venta")
    print("0.- Salir")
    opcion_usuario = int(input("Ingrese una opcion:  "))

    if opcion_usuario == 1:
        print("La forma en la que se presentan las listas es 1.- Descripcion, 2.- Cantidad de piezas vendidas, 3.- Precio")
        Taladro = ["Es una herramienta eléctrica cuyo uso principal, en sus inicios, es realizar perforaciones en cualquier tipo de material",20,599.99]
        print ("Taladro")
        print (Taladro)
        print (separador)
        Multimetro = ["Es un instrumento que permite medir directamente magnitudes eléctricas activas como corrientes y diferencia de potenciales o pasivas como resistencias, capacidades y otras",22,499.99]
        print ("Multimetro")
        print (Multimetro)
        print (separador)
        Broca = ["Es una herramienta metálica de corte que crea orificios circulares en diversos materiales cuando se coloca en una herramienta mecánica como taladro, berbiquí u otra máquina",36,199.99]
        print ("Broca")
        print (Broca)
        print (separador)
        Desarmador_Estrella = ["Es una herramienta que se utiliza para apretar y aflojar tornillos y otros elementos de máquinas que requieren poca fuerza de apriete y que generalmente son de diámetro pequeño",82,99.99]
        print ("Desarmador Estrella")
        print (Desarmador_Estrella)
        print (separador)
        Desarmador_Plano = ["Es una herramienta que se utiliza para apretar y aflojar tornillos y otros elementos de máquinas que requieren poca fuerza de apriete y que generalmente son de diámetro pequeño",64,99.99]
        print ("Desarmador Plano")
        print (Desarmador_Plano)
        print (separador)
        opcion=1
        identificador = input("\nIngresa tu identificador: ")
        if identificador in  venta_final:
            print("\nEse identificador ya esta registrado, intenta con otro")
        else: 
            while opcion == 1: 
                nombr_articulo = input ("\nDime el nombre del producto: ")
                piezas_compradas= int(input("\nDime la cantidad de piezas compradas: "))
                precio_producto= float(input("\nDime el costo del producto: "))
                cantidad_total= piezas_compradas * precio_producto
                print("\nSu monto total a pagar es de $ ",cantidad_total)
                venta_producto= [nombr_articulo, piezas_compradas, precio_producto, round(cantidad_total, 2)]
                venta_final.append(venta_producto)
                opcion = int(input("\n ¿Deseas capturar otro articulo? \n(1-Si / 0-No): "))
            registro_ventas[identificador]=[venta_final]
            venta_final=[]
            numero = identificador
            numero_final = str(numero)
            fecha = date.today()
            fecha_final = fecha.strftime('%d%m%Y')
            folio = numero_final + fecha_final
            lista_folio = [folio]
            lista_identificador = [identificador]
            lista_producto = [nombr_articulo]
            lista_cantidad = [piezas_compradas]
            lista_preciou = [precio_producto]
            lista_preciot = [cantidad_total]
            dict = {"Folio" : lista_folio, "Identificador" : lista_identificador, "Producto" : lista_producto, "Cantidad" : lista_cantidad, "Precio unitario" : lista_preciou, "Precito total" : lista_preciot}
            df = pd.DataFrame(dict) 
            df.to_csv('Venta.csv')
            print ("Haz comprado ", lista_cantidad, "pieza(s) de ", lista_producto, "con un precio unitario de ", lista_preciou, "dando una cantidad total de ", lista_preciot)
            print ("Tu identificador es :", numero_final, "Y tu folio es: ", folio) 
    elif opcion_usuario == 2:
        id_buscar =(input("\nDime el identificador que quieres buscar: "))
        if id_buscar in registro_ventas.keys():
            print("\nLa venta con ese identificador es: ", identificador)
            productos_ticket=list(registro_ventas[identificador])
            listas=["Nombre", "Cantidad" , "Precio venta", "Precio total "]
            print(listas)
            for producto in range(0,len(productos_ticket)+1) : 
                print(productos_ticket[0][producto])
        else:
            print("\nLo siento, ese identificador no esta en la base de datos")
    elif opcion_usuario == 0:
        print ("Haz elegido salir. Gracias por tu preferencia.")
        break
    else: 
        print("Has introducido una opcion invalida")
